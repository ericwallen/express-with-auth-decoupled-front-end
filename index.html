<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Express With Authentication</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.css" />
    <link rel="stylesheet" href="index.css">
  </head>
  <body>
      <div class="cut-container">
        <h1>Express with Auth<span style="color: #CCC">[entication]</span></h1>
        <h2>A JavaScript web app for node that enables you to get <span class="highlight">authentication</span> and <span class="highlight">authorization</span> running <i>locally</i> and on <i>heroku</i> very fast.</h2>
        <img width="20px" style="margin-right: 20px" src="assets/jwt-logo.png" alt=""><img width="60px" src="assets/express-logo.svg" alt="">
      </div>
<main id="container">
  <div class="form-containers">
    <h2 align="center">Sign Up</h1>
    <form class="signup">
      <label for="name-sign-up" class="">Name</label>
      <input id="name-sign-up" class="input" type="text" name="" value=""><br>
      <label for="username-sign-up" class="">Username</label>
      <input id="username-sign-up" class="input" type="text" name="" value=""><br>
      <label for="email-sign-up" class="">email</label>
      <input id="email-sign-up" class="input" type="email" name="" value=""><br>
      <label for="password-sign-up" class="">password</label>
      <input id="password-sign-up" class="input" type="password" name="" value=""><br>
      <button type="submit" name="button">submit</button>
    </form>
  </div>
  <div class="form-containers">
    <h2 align="center">Log In</h1>
      <form class="login">
      <label for="email-log-in" class="">email</label>
      <input id="email-log-in" class="input" type="email" name="email-log-in" ><br>
      <label for="password-log-in" class="">password</label>
      <input id="password-log-in" class="input" type="password" name="password-log-in" ><br>
      <button type="submit" name="button">submit</button>
    </form>
  </div>
</main>
<p id="status-message" style="text-align: center"></p>

<div class="cut-container">
  <h1>localhost Setup Instructions</h1>
  <h3>The sign up and log in forms above will work once you follow a few steps. Ready?</h3>

  <h2>Step 1 - Clone the repository</h2>
  <p>Make a local copy of the repository by cloning it to your computer. Run this command:</p>
  <div class="command-line">
    git clone git@github.com:ericwallen/express-with-auth.git
  </div>

  <h2>Step 2 - Change directory</h2>
  <p>Navigate into the new package folder by running this command:</p>
  <div class="command-line">
    cd express-with-auth
  </div>


  <h2>Step 3 - Install dependencies</h2>
  <p>This is a node package with many dependencies. Assuming you have node installed run the following command:</p>
  <div class="command-line">
    npm install
  </div>

  <h2>Step 4 - Create a .env file and add token key/value pair</h2>
  <p>Lets create the "environment variable". With the touch command create the .env file and put a token key/value inside.  </p>
  <div class="command-line">
    touch .env
  </div>
  <div class="command-line">
    TOKEN_SECRET=new_hotness
  </div>

  <h2>Step 5 - Start it up</h2>
  <p>Now boot it up and navigate to http://localhost:8080. You will see the signup, login forms as well as the instructions to install.</p>
  <div class="command-line">
    npm start
  </div>

  <div class="command-line">
    http://localhost:8080
  </div>



  <h2>Step 6 - Create a Database</h2>
  <p>For this package to work out of the box you will want to name your database exampledb. If you want to change the database name look in the root of express-with-auth for a file called knexfile.js. Inside that you will see the path to postgresql://localhost/exampledb. Change that to whatever your heart desires. Use this command you will use to create the db:</p>
  <div class="command-line">
    createdb exampledb
  </div>

  <h2>Step 7 - Migrate & Seed Database</h2>
  <p>This is an ERD diagram of how the posgresql table schema is laid out.</p>

  <img style="margin-bottom: 10px" src="assets/erd.png" max-width="900px" alt="">
  <p>If you are ok with how we constructed the data you can run the commands below. The ERD is for visual purposes only.</p>
  <div class="command-line">
    knex migrate:latest
  </div>

  <div class="command-line">
    knex seed:run
  </div>



  <h2>Step 8 - Verify Everything is Working Locally</h2>
  <p>Log in to the pre-created accounts you see below. The password for all the default users is "password". After login you will see the users dashboard as well as a secret specific to each user. The data specific to each user is the authorized to see.</p>

  <h3>Batman</h3>
  <div class="command-line">
    email: darkness@pitchblack.ceo <br>
    password: password
  </div>

  <h3>Superman</h3>
  <div class="command-line">
    email: super@man.com <br>
    password: password
  </div>

  <h3>Wonder Woman</h3>
  <div class="command-line">
    email: women@kickass.com <br>
    password: password
  </div>

  <h3>Captain America</h3>
  <div class="command-line">
    email: yeah@merica.com <br>
    password: password
  </div>


  <h1 style="margin-top: 70px">Heroku Deploy Instructions</h1>
  <h3>Heroku has become known to developers as a popular place to deploy full stack apps so we show you how to that however, you can deploy this wherever you feel comfortable.</h3>


  <h2>Step 1 - Create a Heroku account and login</h2>
  <p>If you don't alread have a heroku account you can create one at <a href="https://heroku.com/">heroku.com</a>. After you do that run the command you see below in your terminal. You will be prompted for your email address and password.</p>
  <div class="command-line">
    heroku login
  </div>

  <h2>Step 2 - Run heroku create</h2>
  <p>You can initialize a new heroku app by running this command:</p>
  <div class="command-line">
    heroku create
  </div>

  <h2>Step 3 - Copy the URL to 2 places inside your app</h2>
  <p>When you did "heroku create" there was a web address for your new app. It would look something like this "https://intense-journey-34289.herokuapp.com/". You need to copy that and replace the "http://localhost:8080/" inside two files. </p>
  <ol>
    <li>public > dashboard > app.js </li>
    <li>public > home > app.js</li>
  </ol>
  <div class="command-line">
    // Replace this<br>
    var baseURL = "http://localhost:8080/"<br><br>

    // With something like this<br>
    var baseURL = "https://intense-journey-34289.herokuapp.com/"
  </div>

  <h2>Step 5 - Save and commit</h2>
  <p>Now save your work and then commit </p>
  <div class="command-line">
    git add -A
  </div>
  <div class="command-line">
    git commit -m "commit"
  </div>


  <h2>Step 6 - Push your app files to the server</h2>
  <p>Your files are ready to to be transfered to heroku. Do that with this command: </p>
  <div class="command-line">
    git push heroku master
  </div>

  <h2>Step 7 - add the environment varialbe key/value pair to heroku</h2>
  <p>Just like your local host heroku needs the enviroment variable however, it is added through the command line. Run this command:</p>
  <div class="command-line">
    heroku config:set TOKEN_SECRET=new_hotness
  </div>

  <h2>Step 8 - postgresql addon</h2>
  <p>Provision a postgresql database with this command: </p>
  <div class="command-line">
    heroku addons:create heroku-postgresql:hobby-dev
  </div>

  <h2>Step 9 - Migrate & Seed heroku Database</h2>
  <p>To migrate and seed on the server run the following commands:</p>
  <div class="command-line">
    heroku run knex migrate:latest
  </div>
  <div class="command-line">
    heroku run knex seed:run
  </div>
</div>





    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.11/semantic.min.js"></script>
    <script src="index.js" type="text/javascript"></script>
  </body>
</html>
